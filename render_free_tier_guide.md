# Render Free Tier Deployment Guide

This guide is specifically optimized for deploying your Django chat application on Render's **free tier**.

## ‚ö†Ô∏è Free Tier Limitations

- **Sleep after 15 minutes** of inactivity
- **512MB RAM** limit
- **Shared CPU** resources
- **No custom domains** (only `.onrender.com`)
- **Limited bandwidth**

## üöÄ Deployment Steps

### 1. Prepare Your Repository

Make sure your code is pushed to GitHub/GitLab with these files:
- ‚úÖ `build.sh`
- ‚úÖ `render.yaml`
- ‚úÖ `requirements.txt`
- ‚úÖ `Procfile`
- ‚úÖ `runtime.txt`

### 2. Create Render Account

1. Go to [render.com](https://render.com)
2. Sign up with GitHub/GitLab
3. Verify your email

### 3. Deploy Web Service

1. **Dashboard** ‚Üí "New +" ‚Üí "Web Service"
2. **Connect Repository** ‚Üí Select your chat app repo
3. **Configure Service:**

```
Name: django-chat-app
Environment: Python
Region: Choose closest to you
Branch: main (or your default branch)
Root Directory: (leave empty)
Build Command: ./build.sh
Start Command: gunicorn django_chat.wsgi:application --bind 0.0.0.0:$PORT
```

### 4. Environment Variables

Add these in the Render dashboard:

```
SECRET_KEY: (auto-generated by Render)
DEBUG: False
ALLOWED_HOSTS: .onrender.com
DATABASE_URL: (will be auto-configured)
CHANNEL_LAYERS: {"default": {"BACKEND": "channels.layers.InMemoryChannelLayer"}}
```

### 5. Create PostgreSQL Database

1. **Dashboard** ‚Üí "New +" ‚Üí "PostgreSQL"
2. **Configure:**
   ```
   Name: django-chat-db
   Database: chatdb
   User: chatuser
   Plan: Free
   ```
3. **Connect to Web Service** ‚Üí Select your web service

### 6. Deploy

Click **"Create Web Service"** and wait for deployment.

## üîß Free Tier Optimizations

### 1. Memory Optimization

```python
# In settings.py - already configured
STATICFILES_STORAGE = 'whitenoise.storage.CompressedManifestStaticFilesStorage'
```

### 2. Database Optimization

```python
# In settings.py - already configured
DATABASES = {
    'default': dj_database_url.config(
        default=os.environ.get('DATABASE_URL'),
        conn_max_age=600  # Connection pooling
    )
}
```

### 3. Static Files

- WhiteNoise serves static files efficiently
- Files are compressed and cached
- No CDN needed for free tier

### 4. WebSocket Configuration

Using `InMemoryChannelLayer` for free tier:
- ‚úÖ No additional service needed
- ‚úÖ Works with single instance
- ‚ùå Not scalable (but free tier is single instance anyway)

## üì± Testing Your Deployment

### 1. Check Build Logs

Monitor the build process in Render dashboard:
- ‚úÖ Dependencies installed
- ‚úÖ Migrations run
- ‚úÖ Static files collected
- ‚úÖ Superuser created

### 2. Test the Application

Visit your app URL: `https://your-app-name.onrender.com`

**Default Login:**
- Username: `admin`
- Password: `admin123`

### 3. Test Features

- ‚úÖ User registration/login
- ‚úÖ Real-time chat
- ‚úÖ File uploads
- ‚úÖ User profiles

## üîÑ Free Tier Considerations

### Sleep/Wake Behavior

- **Sleeps after 15 minutes** of inactivity
- **First request** after sleep takes 30-60 seconds
- **Subsequent requests** are fast
- **WebSocket connections** will disconnect during sleep

### Performance Tips

1. **Keep it simple** - Avoid heavy computations
2. **Optimize images** - Use compressed formats
3. **Minimize dependencies** - Only essential packages
4. **Use caching** - Leverage browser caching

### Limitations Workarounds

1. **Sleep issue**: Use external monitoring service
2. **Memory limits**: Optimize static files
3. **No custom domain**: Use `.onrender.com` subdomain
4. **Limited bandwidth**: Compress assets

## üõ†Ô∏è Troubleshooting

### Common Issues

1. **Build fails:**
   - Check `requirements.txt` for conflicts
   - Verify Python version in `runtime.txt`
   - Check build logs for errors

2. **App crashes:**
   - Check logs in Render dashboard
   - Verify environment variables
   - Check database connection

3. **Static files not loading:**
   - Verify `collectstatic` ran successfully
   - Check WhiteNoise configuration
   - Clear browser cache

4. **WebSocket not working:**
   - Check `CHANNEL_LAYERS` configuration
   - Verify `daphne` is installed
   - Check browser console for errors

### Debug Commands

```bash
# Check build logs
# View in Render dashboard

# Check app logs
# View in Render dashboard

# Test database connection
python manage.py dbshell

# Check static files
python manage.py collectstatic --dry-run
```

## üìà Monitoring

### Free Tier Monitoring

- **Uptime**: Check if app is responding
- **Response time**: Monitor wake-up times
- **Error rates**: Check logs for issues
- **Resource usage**: Monitor memory usage

### External Monitoring

Use free services to keep your app awake:
- UptimeRobot (free tier)
- Pingdom (free tier)
- StatusCake (free tier)

## üîÑ Scaling Considerations

When you're ready to upgrade:

1. **Upgrade to paid plan** for:
   - Always-on service
   - Custom domains
   - More resources
   - Better performance

2. **Add Redis** for:
   - Better WebSocket scaling
   - Session storage
   - Caching

3. **Use CDN** for:
   - Faster static file delivery
   - Global distribution

## üéâ Success!

Your Django chat app is now deployed on Render's free tier!

**Remember:**
- App sleeps after 15 minutes of inactivity
- First request after sleep is slow
- Perfect for demos and small projects
- Easy to upgrade when needed

---

**Need help?** Check Render's documentation or community forums for free tier specific issues. 